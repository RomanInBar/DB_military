drop database if exists MilitaryBase;
create database MilitaryBase;
use MilitaryBase;

/*-----------------------------------------------/Users/---------------------------------------------------*/

/*grant all on MilitaryBase.* to 'admin'@'localhost' identified with admin by 'admin';

grant select, insert, update, delete on MilitaryBase.* to 'yakublavrov'@'localhost' 
identified with LavrovYakub by 'password_1'
with max_user_connections 1;

grant select on MilitaryBase.* to 'officers'@'localhost'
identified with OfficersStaff by 'password_2'
with max_queries_per_hour 20;
revoke all privileges on MilitaryBase.LaunchComplex from 'officers'@'localhost';*/


/*---------------------------------------------------------------------------------------------------------*/

drop table if exists MilitaryObject;
create table MilitaryObject(

	id serial primary key,
	Objects varchar(45)
);

alter table MilitaryBase.MilitaryObject convert to character set utf8
collate utf8_general_ci;

insert into MilitaryObject(objects)
values
('Штаб'),
('Санчасть'),
('Казармы'),
('Полигон'),
('Склады'),
('Пусковаые шахты'),
('Аэропорт');

drop table if exists OfficerPersonel;
create table OfficerPersonel(

	PersonalNumber serial primary key,
	Name varchar(100),
	`Rank` varchar(45),
	military_object_id bigint unsigned not null default 1,
	foreign key (military_object_id) references MilitaryObject(id)
);

alter table OfficerPersonel convert to character set utf8
collate utf8_general_ci;

insert into OfficerPersonel(Name, `Rank`)
values
('Лавров Якуб Федорович', 'Полковник'),
('Яганов Лаврентий Капитонович', 'Подполковник'),
('Ябловский Вацлав Макарович', 'Майор'),
('Юракин Владислав Зиновиевич', 'Майор'),
('Якуничев Якуб Сергеевич', 'Капитан'),
('Нефёдов Степан Фомевич', 'Капитан'),
('Мосенцов Авдей Фролович', 'Капитан'),
('Краснокутский Аскольд Эрнстович', 'Старший лейтенант'),
('Слепынин Онуфрий Герасимович', 'Старший лейтенант'),
('Сусоев Виктор Гордеевич', 'Лейтенант'),
('Божко Игнатий Эрнестович', 'Лейтенант'),
('Елисеев Поликарп Зиновиевич', 'Лейтенант'),
('Манякин Онуфрий Никанорович', 'Лейтенант'),
('Богоявленский Василий Зиновиевич', 'Младший лейтенант'),
('Беляев Фадей Ипполитович', 'Младший лейтенант'),
('Зощенко Игнатий Касьянович', 'Младший лейтенант'),
('Коченков Фома Федотович', 'Младший лейтенант');

drop table if exists Infirmary;
create table Infirmary(

	PersonalNumber serial primary key,
	Name varchar(100),
	`Rank` varchar(45),
	military_object_id bigint unsigned not null default 2,
	foreign key (military_object_id) references MilitaryObject(id)
);

alter table Infirmary convert to character set utf8
collate utf8_general_ci;

insert into Infirmary(Name, `Rank`)
values
('Дернов Викентий Родионович', 'Ортопед'),
('Краснопёров Захар Фролович', 'Хирург'),
('Абарникова Римма Игнатиевна', 'Старшая медсестра'),
('Аниканова Юлия Казимировна', 'Медсестра'),
('Бока Наталья Алексеевна', 'Медсестра');

drop table if exists Caserns;
create table Caserns(

	CasernNumber serial primary key, 
	Platoon varchar(10) not null unique,
	Soldiers bigint unsigned,
	Commander varchar(100),
	military_object_id bigint unsigned not null default 3,
	foreign key (military_object_id) references MilitaryObject(id)
);

alter table Caserns convert to character set utf8
collate utf8_general_ci;

insert into Caserns(PLatoon, Soldiers, Commander)
values
('1-12', '25', 'Сусоев Виктор Гордеевич'),
('2-12', '25', 'Елисеев Поликарп Зиновиевич'),
('3-12', '20', 'Беляев Фадей Ипполитович'),
('4-12', '23', 'Коченков Фома Федотович');

drop table if exists Polygons;
create table Polygons(

	PolygonNumber serial primary key,
	Area decimal(4.2),
	UnitOfMeasure varchar(5),
	Aims varchar(45),
	military_object_id bigint unsigned not null default 4,
	foreign key (military_object_id) references MilitaryObject(id)
);

alter table Polygons convert to character set utf8
collate utf8_general_ci;

insert into Polygons(Area, UnitOfMeasure, Aims)
values
('3480.20', 'кв/м', 'Пехота'),
('5000.00', 'кв/м', 'Пехота'),
('25', 'Га', 'Танки'),
('68', 'Га', 'Танки');


drop table if exists Warehouse;
create table Warehouse(

	ID serial primary key,
	`Description` varchar (255),
	Model varchar(45),
	Total bigint unsigned,
	UnitOfMeasure varchar(5),
	WarehouseNumber bigint unsigned not null,
	military_object_id bigint unsigned not null default 5,
	foreign key (military_object_id) references MilitaryObject(id),
	index warehouse_description (Description),
	index warehouse_model (Model)
);

alter table Warehouse convert to character set utf8
collate utf8_general_ci;

insert into Warehouse(Description, Model, Total, UnitOfMeasure, WarehouseNumber)
values
('Патроны', '5,45х39 мм.', '38', 'ящ.', '1'),
('Патроны', '5,45х39 мм.', '40', 'ящ.', '2'),
('Патроны', '5,45х39 мм.', '27', 'ящ.', '3'),
('Патроны', '5,45х39 мм.', '40', 'ящ.', '4'),
('Патроны', '7,62х54 мм.', '50', 'ящ.', '1'),
('Патроны', '7,62х54 мм.', '44', 'ящ.', '2'),
('Патроны', '7,62х54 мм.', '25', 'ящ.', '3'),
('Патроны', '7,62х54 мм.', '30', 'ящ.', '4'),
('Патроны', '12,7х108 мм.', '49', 'ящ.', '1'),
('Патроны', '12,7х108 мм.', '40', 'ящ.', '2'),
('Патроны', '12,7х108 мм.', '40', 'ящ.', '3'),
('Патроны', '6,5 мм.', '80', 'ящ.', '4'),
('Грузовик', 'Мерседес-Бенц Унимог', '3', 'ед.', '1'),
('Грузовик', 'Мерседес-Бенц Унимог', '1', 'ед.', '2'),
('Грузовик', 'Мерседес-Бенц Унимог', '6', 'ед.', '4'),
('Джип', 'Land Rover Defender 90', '4', 'ед.', '1'),
('Джип', 'Land Rover Defender 90', '1', 'ед.', '3'),
('Джип', 'Land Rover Defender 90', '7', 'ед.', '4'),
('Джип', 'Land Rover Defender 110', '2', 'ед.', '2'),
('Джип', 'Land Rover Defender 110', '2', 'ед.', '3'),
('Танк', 'Т-90 («Владимир»)', '6', 'ед.', '5'),
('Танк', 'Т-90 («Владимир»)', '6', 'ед.', '6'),
('Танк', 'Type-99', '4', 'ед.', '5'),
('Танк', 'Type-99', '4', 'ед.', '6'),
('Танк', '«Армата»', '2', 'ед.', '1'),
('Танк', '«Армата»', '2', 'ед.', '3'),
('Танк', '«Армата»', '5', 'ед.', '5'),
('Танк', '«Армата»', '7', 'ед.', '6'),
('Ракетоноситель', '«Тополь-М»', '4', 'ед.', '6'),
('Бронетранспортер', 'БТР-82А', '6', 'ед.', '5'),
('Бронетранспортер', 'БТР-82А', '3', 'ед.', '6'),
('Межконтинентальная стратегическая ракета', '15А14', '6', 'ед.', '7'),
('Баллистическая ракета', 'РТ-2ПМ2', '12', 'ед.', '7'),
('Баллистическая ракета', 'PC-24 «Ярс»', '10', 'ед.', '7'),
('Баллистическая ракета', '15Ж60 «Молодец»', '20', 'ед.', '7'),
('Стратегическая крылатая ракета', 'Х-101', '15', 'ед.', '7'),
('Автомат', 'АК-12', '80', 'ед.', '8'),
('Пулемет', 'ПКМ', '20', 'ед.', '8'),
('Пистолет', 'М1911', '30', 'ед', '8'),
('Пистолет-пулемет', 'НК-МР-5', '30', 'ед.', '8'),
('Винтовка', 'AR-15', '25', 'ед.', '8'),
('Гранатомет', 'РПГ-7', '15', 'ед.', '8'),
('Винтовка', 'Ремингтон 700', '15', 'ед.', '8'),
('Автомат', 'АК-47', '130', 'ед.', '8'),
('Граната', 'РГ-14', '25', 'ящ.', '7'),
('Граната светошумовая', '«Заря»', '10', 'ящ.', '7'),
('Граната дымовая', 'М15', '10', 'ящ.', '7');

drop trigger if exists `not_null_Warehouse`;
delimiter //
create trigger `not_null_Warehouse` before insert on Warehouse
for each row 
begin 
	if new.Description = null then 
		signal sqlstate '45000' set message_text = "Can't be without values";
	end if;
	if new.Model = null then
		signal sqlstate '45000' set message_text = "Can't be without values";
	end if;
	if new.Total = null then
		signal sqlstate '45000' set message_text = "Can't be without values";
	end if;
	if new.UnitOfMeasure = null then
		signal sqlstate '45000' set message_text = "Can't be without values";
	end if;
	if new.WarehouseNumber = null then
		signal sqlstate '45000' set message_text = "Can't be without values";
	end if;
end//
delimiter ;

drop table if exists LaunchComplex;
create table LaunchComplex(

	LaunchComplexNumber serial primary key,
	Status varchar (45),
	military_object_id bigint unsigned not null default 6,
	foreign key (military_object_id) references MilitaryObject(id)

);

alter table LaunchComplex convert to character set utf8
collate utf8_general_ci;

insert into LaunchComplex(Status)
values
('Ракета в шахте'),
('Ракета в шахте'),
('Ракета в шахте'),
('Ракета в шахте'),
('Пустая');

drop table if exists PersonalInformationOfficer;
create table PersonalInformationOfficer(

	ID serial primary key,
	Name varchar(100),
	Passport varchar(255) unique,
	Address varchar(255),
	Telephone varchar(20) unique,
	officer_personel_id bigint unsigned not null,
	foreign key (officer_personel_id) references OfficerPersonel(PersonalNumber),
	foreign key (officer_personel_id) references Infirmary(PersonalNumber),
	index officer_name (Name)
);

alter table PersonalInformationOfficer convert to character set utf8
collate utf8_general_ci;

insert into PersonalInformationOfficer(Name, Passport, Address, Telephone, officer_personel_id)
values
('Лавров Якуб Федорович', '4356 335324, ОУФМС России по г. Рязань', 'Россия, г. Рязань, Луговой пер., д. 19 кв.80', '982-65-12', '1'),
('Яганов Лаврентий Капитонович', '4038 222405, ОУФМС России по г. Сыктывкар', 'Россия, г. Сыктывкар, Заречная ул., д. 13 кв.1', '324-87-57', '1'),
('Ябловский Вацлав Макарович', '4070 709320, Отделом внутренних дел России по г. Коломна', 'Россия, г. Коломна, Мичурина ул., д. 20 кв.218', '032-93-08', '1'),
('Юракин Владислав Зиновиевич', '4392 464387, Отделом внутренних дел России по г. Одинцово', 'Россия, г. Одинцово, Тихая ул., д. 2 кв.162', '524-65-74', '1'),
('Якуничев Якуб Сергеевич', '4755 312351, Отделением УФМС России по г. Якутск', 'Россия, г. Якутск, Колхозный пер., д. 25 кв.128', '571-18-39', '1'),
('Нефёдов Степан Фомевич', '4056 121884, Отделом УФМС России по г. Рыбинск', 'Россия, г. Рыбинск, Набережная ул., д. 18 кв.104', '530-39-70', '1'),
('Мосенцов Авдей Фролович', '4877 273552, Отделением УФМС России по г. Великий Новгород', 'Россия, г. Великий Новгород, Заречный пер., д. 6 кв.134', '139-43-74', '1'),
('Краснокутский Аскольд Эрнстович', '4411 288644, Отделом внутренних дел России по г. Новошахтинск', 'Россия, г. Новошахтинск, Октябрьский пер., д. 19 кв.64', '995-56-90', '1'),
('Слепынин Онуфрий Герасимович', '4464 443861, Отделом УФМС России по г. Серпухов', 'Россия, г. Серпухов, Пролетарская ул., д. 13 кв.67', '624-55-36', '1'),
('Сусоев Виктор Гордеевич', '4876 799927, ОВД России по г. Комсомольск-на-Амуре', 'Россия, г. Комсомольск-на-Амуре, Озерный пер., д. 2 кв.33', '764-74-57', '1'),
('Божко Игнатий Эрнестович', '4040 977084, Управление внутренних дел по г. Димитровград', 'Россия, г. Димитровград, Кирова ул., д. 20 кв.61', '080-71-73', '1'),
('Елисеев Поликарп Зиновиевич', '4542 930800, Отделением УФМС России в г. Щёлково', 'Россия, г. Щёлково, Интернациональная ул., д. 7 кв.31', '549-34-31', '1'),
('Манякин Онуфрий Никанорович', '4619 782682, Отделением УФМС России в г. Реутов', 'Россия, г. Реутов, Вокзальная ул., д. 17 кв.2', '414-87-75', '1'),
('Богоявленский Василий Зиновиевич', '4199 619560, Отделением УФМС России в г. Новочеркасск', 'Россия, г. Новочеркасск, Дорожная ул., д. 19 кв.90', '567-62-56', '1'),
('Беляев Фадей Ипполитович', '4055 935415, ОУФМС России по г. Новороссийск', 'Россия, г. Новороссийск, Ленинская ул., д. 3 кв.113', '469-64-36', '1'),
('Зощенко Игнатий Касьянович', '4679 702307 Управление внутренних дел по г. Салават', 'Россия, г. Салават, Радужная ул., д. 16 кв.216', '863-29-47', '1'),
('Коченков Фома Федотович', '4290 863284, ОВД России по г. Грозный', 'Россия, г. Грозный, Полевая ул., д. 16 кв.194', '622-40-79', '1'),
('Дернов Викентий Родионович', '4827 834910, Отделением УФМС России по г. Тюмень', 'Россия, г. Тюмень, Строителей ул., д. 13 кв.62', '372-53-88', '2'),
('Краснопёров Захар Фролович', '4572 586918, Отделением УФМС России в г. Королёв', 'Россия, г. Королёв, Зеленая ул., д. 7 кв.73', '583-91-08', '2'),
('Абарникова Римма Игнатиевна', '4040 321983, Отделением УФМС России по г. Рубцовск', 'Россия, г. Рубцовск, 3 Марта ул., д. 16 кв.202', '622-66-00', '2'),
('Аниканова Юлия Казимировна', '4221 100500, ОУФМС России по г. Бийск', 'Россия, г. Бийск, Железнодорожная ул., д. 6 кв.188', '173-11-65', '2'),
('Бока Наталья Алексеевна', '4515 363753, Управление внутренних дел по г. Балаково', 'Россия, г. Балаково, Белорусская ул., д. 15 кв.94', '600-65-02', '2');

drop trigger if exists `not_null_PIO`;
delimiter //
create trigger `not_null_PIO` before insert on PersonalInformationOfficer
for each row 
begin 
	if new.Name = null then 
		signal sqlstate '45000' set message_text = "Can't be without values";
	end if;
	if new.Passport = null then
		signal sqlstate '45000' set message_text = "Can't be without values";
	end if;
	if new.Address = null then
		signal sqlstate '45000' set message_text = "Can't be without values";
	end if;
	if new.Telephone = null then
		signal sqlstate '45000' set message_text = "Can't be without values";
	end if;
end//
delimiter ;

drop table if exists Timetable;
create table Timetable(

	ID serial primary key,
	PolygonsNumber bigint unsigned not null,
	PlatoonNumber bigint unsigned not null,
	`Start` datetime,
	`Finich` datetime,
	foreign key (PolygonsNumber) references Polygons(PolygonNumber)

);


drop table if exists Soldiers;
create table Soldiers(

	ID serial primary key,
	PlatoonNumbers varchar(10) not null,
	NameSoldier varchar(155),
	`Rank` varchar(45),
	Casern bigint unsigned not null,
	foreign key (Casern) references Caserns(CasernNumber)
	
	
);


alter table Soldiers convert to character set utf8
collate utf8_general_ci;

insert into Soldiers(PLatoonNumbers, NameSoldier, `Rank`,  Casern)
values
('1-12', 'Ситников Аким Евгеньевич', 'Рядовой', '1'),
('1-12', 'Шашков Ждан Андреевич', 'Рядовой', '1'),
('1-12', 'Игнатов Нестор Виталиевич', 'Рядовой', '1'),
('1-12', 'Суханов Заур Викторович', 'Рядовой', '1'),
('1-12', 'Медяник Ярослав Артёмович', 'Ефрейтор', '1'),
('1-12', 'Рожков Тимур Романович', 'Рядовой', '1'),
('1-12', 'Дьячков Ярослав Богданович', 'Рядовой', '1'),
('1-12', 'Лапин Шерлок Анатолиевич', 'Сержант', '1'),
('1-12', 'Никонов Даниил Станиславович', 'Рядовой', '1'),
('1-12', 'Кудрявцев Давид Сергеевич', 'Рядовой', '1'),
('1-12', 'Острожский Йоган Львович', 'Ефрейтор', '1'),
('1-12', 'Кравчук Зуфар Ярославович', 'Рядовой', '1'),
('1-12', 'Сасько Тарас Артёмович', 'Рядовой', '1'),
('1-12', 'Ковальчук Чарльз Богданович', 'Сержант', '1'),
('1-12', 'Ситников Шарль Владимирович', 'Рядовой', '1'),
('1-12', 'Жданов Богдан Васильевич', 'Рядовой', '1'),
('1-12', 'Степанов Матвей Александрович', 'Ефрейтор', '1'),
('1-12', 'Тимофеев Евсей Богданович', 'Рядовой', '1'),
('1-12', 'Каськив Артём Юхимович', 'Рядовой', '1'),
('1-12', 'Бородай Устин Романович', 'Рядовой', '1'),
('1-12', 'Русаков Зураб Юхимович', 'Старший сержант', '1'),
('1-12', 'Желиба Марк Григорьевич', 'Рядовой', '1'),
('1-12', 'Хованский Йозеф Платонович', 'Рядовой', '1'),
('1-12', 'Карпенко-Карый Эрик Фёдорович', 'Рядовой', '1'),
('1-12', 'Морозов Валериан Богданович', 'Рядовой', '1'),
('2-12', 'Шумейко Карл Алексеевич', 'Ефрейтор', '2'),
('2-12', 'Игнатов Йоган Александрович', 'Рядовой', '2'),
('2-12', 'Борисенко Пётр Богданович', 'Рядовой', '2'),
('2-12', 'Громов Жигер Владимирович', 'Сержант', '2'),
('2-12', 'Молчанов Игорь Артёмович', 'Рядовой', '2'),
('2-12', 'Бутко Станислав Григорьевич', 'Рядовой', '2'),
('2-12', 'Гелетей Зураб Алексеевич', 'Старший сержант', '2'),
('2-12', 'Емельянов Ждан Александрович', 'Сержант', '2'),
('2-12', 'Филатов Константин Викторович', 'Рядовой', '2'),
('2-12', 'Смирнов Нестор Петрович', 'Рядовой', '2'),
('2-12', 'Исаков Цефас Платонович', 'Рядовой', '2'),
('2-12', 'Аксёнов Артур Васильевич', 'Ефрейтор', '2'),
('2-12', 'Тимофеев Юлиан Евгеньевич', 'Рядовой', '2'),
('2-12', 'Родионов Валерий Петрович', 'Рядовой', '2'),
('2-12', 'Калашников Яромир Данилович', 'Рядовой', '2'),
('2-12', 'Большаков Ярослав Фёдорович', 'Рядовой', '2'),
('2-12', 'Александров Вячеслав Дмитриевич', 'Рядовой', '2'),
('2-12', 'Погомий Дарий Васильевич', 'Рядовой', '2'),
('2-12', 'Горшков Святослав Брониславович', 'Рядовой', '2'),
('2-12', 'Михайлов Йосеф Иванович', 'Рядовой', '2'),
('2-12', 'Евдокимов Филипп Максимович', 'Рядовой', '2'),
('2-12', 'Воронов Чарльз Леонидович', 'Рядовой', '2'),
('2-12', 'Желиба Жигер Леонидович', 'Рядовой', '2'),
('2-12', 'Хохлов Василий Андреевич', 'Рядовой', '2'),
('2-12', 'Меркушев Константин Юхимович', 'Рядовой', '2'),
('3-12', 'Мясников Тит Валериевич', 'Рядовой', '3'),
('3-12', 'Поляков Илларион Валериевич', 'Рядовой', '3'),
('3-12', 'Спивак Мирослав Андреевич', 'Ефрейтор', '3'),
('3-12', 'Князев Людовик Борисович', 'Рядовой', '3'),
('3-12', 'Новиков Людовик Платонович', 'Сержант', '3'),
('3-12', 'Бородай Эдуард Алексеевич', 'Рядовой', '3'),
('3-12', 'Борисов Йосып Вадимович', 'Рядовой', '3'),
('3-12', 'Савин Максим Сергеевич', 'Рядовой', '3'),
('3-12', 'Панов Жигер Богданович', 'Сержант', '3'),
('3-12', 'Сирко Чарльз Анатолиевич', 'Рядовой', '3'),
('3-12', 'Бондаренко Семён Артёмович', 'Рядовой', '3'),
('3-12', 'Кириллов Харитон Артёмович', 'Рядовой', '3'),
('3-12', 'Гриневская Иван Виталиевич', 'Старший сержант', '3'),
('3-12', 'Фёдоров Йосеф Дмитриевич', 'Рядовой', '3'),
('3-12', 'Логинов Никодим Брониславович', 'Рядовой', '3'),
('3-12', 'Передрий Огюст Алексеевич', 'Рядовой', '3'),
('3-12', 'Пономарёв Яков Юхимович', 'Рядовой', '3'),
('3-12', 'Гребневский Афанасий Александрович', 'Рядовой', '3'),
('3-12', 'Громов Цицерон Анатолиевич', 'Ефрейтор', '3'),
('3-12', 'Михеев Максим Львович', 'Рядовой', '3'),
('4-12', 'Котовский Феликс Романович', 'Рядовой', '4'),
('4-12', 'Егоров Тимофей Дмитриевич', 'Ефрейтор', '4'),
('4-12', 'Лапин Устин Артёмович', 'Рядовой', '4'),
('4-12', 'Несвитайло Прохор Львович', 'Рядовой', '4'),
('4-12', 'Андреев Зиновий Ярославович', 'Старший сержант', '4'),
('4-12', 'Тихонов Огюст Иванович', 'Рядовой', '4'),
('4-12', 'Ершов Сергей Викторович', 'Сержант', '4'),
('4-12', 'Назаров Абрам Васильевич', 'Рядовой', '4'),
('4-12', 'Крылов Артемий Александрович', 'Рядовой', '4'),
('4-12', 'Линник Цицерон Максимович', 'Сержант', '4'),
('4-12', 'Зиновьев Юрий Вадимович', 'Рядовой', '4'),
('4-12', 'Нестеров Филипп Сергеевич', 'Рядовой', '4'),
('4-12', 'Гордеев Анатолий Львович', 'Рядовой', '4'),
('4-12', 'Кириллов Сергей Сергеевич', 'Рядовой', '4'),
('4-12', 'Логинов Фёдор Петрович', 'Рядовой', '4'),
('4-12', 'Беляев Харитон Вадимович', 'Рядовой', '4'),
('4-12', 'Суворов Станислав Ярославович', 'Рядовой', '4'),
('4-12', 'Масловский Шерлок Львович', 'Ефрейтор', '4'),
('4-12', 'Белозёров Емельян Владимирович', 'Рядовой', '4'),
('4-12', 'Баранов Эдуард Анатолиевич', 'Рядовой', '4'),
('4-12', 'Лукашенко Феликс Сергеевич', 'Рядовой', '4'),
('4-12', 'Яровой Феликс Максимович', 'Рядовой', '4'),
('4-12', 'Попов Назар Борисович', 'Ефрейтор', '4');

drop table if exists PersonalInformationSoldiers;
create table PersonalInformationSoldiers(

	ID serial primary key,
	Name varchar(150),
	BirthDate date,
	Address varchar (255),
	Telephone varchar(20) unique,
	foreign key (ID) references Soldiers(ID) ,
	index soldir_name (Name)

);

alter table PersonalInformationSoldiers convert to character set utf8
collate utf8_general_ci;

insert into PersonalInformationSoldiers(Name, BirthDate, Address, Telephone)
values
('Ситников Аким Евгеньевич', '06.03.2001', 'Россия, г. Химки, Социалистическая ул., д. 13 кв.64', '700-65-43'),
('Шашков Ждан Андреевич','07.08.2001', 'Россия, г. Назрань, Заводская ул., д. 16 кв.40', '401-93-76'),
('Игнатов Нестор Виталиевич', '03.10.2001', 'Россия, г. Сургут, Чкалова ул., д. 25 кв.116', '013-09-44'),
('Суханов Заур Викторович', '03.04.2002', 'Россия, г. Северск, Набережная ул., д. 9 кв.77', '858-42-88'),
('Медяник Ярослав Артёмович', '06.08.2002', 'Россия, г. Чита, Садовый пер., д. 12 кв.130', '895-33-92'),
('Рожков Тимур Романович', '15.09.2000', 'Россия, г. Киров, Космонавтов ул., д. 1 кв.53', '948-22-48'),
('Дьячков Ярослав Богданович', '29.05.2001', 'Россия, г. Киров, Космонавтов ул., д. 1 кв.53', '612-56-74'),
('Лапин Шерлок Анатолиевич', '30.08.2001', 'Россия, г. Хабаровск, 17 Сентября ул., д. 2 кв.86', '239-41-83'),
('Никонов Даниил Станиславович', '15.08.2002', 'Россия, г. Долгопрудный, 3 Марта ул., д. 18 кв.182', '793-19-59'),
('Кудрявцев Давид Сергеевич', '12.12.2002', 'Россия, г. Батайск, Дружбы ул., д. 15 кв.142', '971-22-94'),
('Острожский Йоган Львович', '21.07.2000', 'Россия, г. Краснодар, Солнечная ул., д. 18 кв.92', '832-76-70'),
('Кравчук Зуфар Ярославович', '20.12.2000', 'Россия, г. Таганрог, Светлая ул., д. 23 кв.38', '034-33-36'),
('Сасько Тарас Артёмович', '12.06.2001', 'Россия, г. Братск, Новая ул., д. 15 кв.167', '781-50-32'),
('Ковальчук Чарльз Богданович', '20.05.2002', 'Россия, г. Норильск, Тихая ул., д. 19 кв.101', '120-87-78'),
('Ситников Шарль Владимирович', '21.05.2002', 'Россия, г. Владимир, Октябрьский пер., д. 17 кв.113', '113-79-41'),
('Жданов Богдан Васильевич', '15.01.2001', 'Россия, г. Камышин, Озерная ул., д. 21 кв.201', '764-19-09'),
('Степанов Матвей Александрович', '24.05.2001', 'Россия, г. Пермь, Центральный пер., д. 1 кв.61', '912-04-42'),
('Тимофеев Евсей Богданович', '22.10.2001', 'Россия, г. Элиста, Зеленая ул., д. 6 кв.100', '635-40-49'),
('Каськив Артём Юхимович', '15.04.2002', 'Россия, г. Ногинск, Майская ул., д. 14 кв.160', '538-57-05'),
('Бородай Устин Романович', '12.11.2002', 'Россия, г. Альметьевск, Дружная ул., д. 19 кв.116', '696-69-53'),
('Русаков Зураб Юхимович', '05.04.2000', 'Россия, г. Арзамас, Тихая ул., д. 21 кв.110', '967-03-73'),
('Желиба Марк Григорьевич', '03.01.2001', 'Россия, г. Сергиев Посад, Песчаная ул., д. 23 кв.126', '509-28-33'),
('Хованский Йозеф Платонович', '01.11.2001', 'Россия, г. Муром, Мира ул., д. 9 кв.198', '943-18-04'),
('Карпенко-Карый Эрик Фёдорович', '19.03.2002', 'Россия, г. Сергиев Посад, Молодежный пер., д. 3 кв.215', '049-71-60'),
('Морозов Валериан Богданович', '05.12.2002', 'Россия, г. Тюмень, Цветочная ул., д. 13 кв.128', '271-55-46'),
('Шумейко Карл Алексеевич', '11.04.2000', 'Россия, г. Новороссийск, Спортивная ул., д. 17 кв.94', '463-39-68'),
('Игнатов Йоган Александрович', '20.10.2000', 'Россия, г. Кемерово, Набережная ул., д. 8 кв.145', '020-93-44'),
('Борисенко Пётр Богданович', '18.04.2001', 'Россия, г. Саранск, Чкалова ул., д. 17 кв.158', '940-10-12'),
('Громов Жигер Владимирович', '16.10.2001', 'Россия, г. Тверь, ЯнкиКупалы ул., д. 3 кв.219', '848-49-45'),
('Молчанов Игорь Артёмович', '19.11.2002', 'Россия, г. Орск, Космонавтов ул., д. 21 кв.49', '097-06-59'),
('Бутко Станислав Григорьевич', '11.05.2000', 'Россия, г. Прокопьевск, Лесная ул., д. 8 кв.138', '823-34-73'),
('Гелетей Зураб Алексеевич', '22.05.2000', 'Россия, г. Прокопьевск, Первомайская ул., д. 7 кв.109', '797-55-27'),
('Емельянов Ждан Александрович', '24.04.2001', 'Россия, г. Красноярск, Новая ул., д. 8 кв.122', '852-98-66'),
('Филатов Константин Викторович', '14.02.2002', 'Россия, г. Северодвинск, Садовая ул., д. 5 кв.128', '700-89-14'),
('Смирнов Нестор Петрович', '03.12.2002', 'Россия, г. Балашиха, Первомайский пер., д. 9 кв.159', '481-96-41'),
('Исаков Цефас Платонович', '17.08.2000', 'Россия, г. Пушкино, Минская ул., д. 23 кв.69', '399-81-67'),
('Аксёнов Артур Васильевич', '07.12.2000', 'Россия, г. Хасавюрт, Западная ул., д. 17 кв.26', '108-06-50'),
('Тимофеев Юлиан Евгеньевич', '22.06.2001', 'Россия, г. Муром, Белорусская ул., д. 10 кв.132', '513-43-82'),
('Родионов Валерий Петрович', '29.11.2001', 'Россия, г. Ногинск, Луговая ул., д. 3 кв.40', '637-28-86'),
('Калашников Яромир Данилович', '13.02.2002', 'Россия, г. Ульяновск, Набережная ул., д. 11 кв.58', '750-91-88'),
('Большаков Ярослав Фёдорович', '18.12.2000', 'Россия, г. Липецк, Космонавтов ул., д. 6 кв.13', '210-21-93'),
('Александров Вячеслав Дмитриевич', '05.01.2001', 'Россия, г. Дербент, Победы ул., д. 1 кв.92', '871-16-58'),
('Погомий Дарий Васильевич', '27.03.2002', 'Россия, г. Челябинск, Приозерная ул., д. 5 кв.132', '068-58-10'),
('Горшков Святослав Брониславович', '17.07.2002', 'Россия, г. Курган, Луговой пер., д. 7 кв.138', '184-63-19'),
('Михайлов Йосеф Иванович', '25.12.2002', 'Россия, г. Волгодонск, Западная ул., д. 3 кв.69', '208-30-23'),
('Евдокимов Филипп Максимович', '18.05.2000', 'Россия, г. Орёл, Пионерская ул., д. 9 кв.206', '950-61-98'),
('Воронов Чарльз Леонидович', '22.06.2000', 'Россия, г. Иркутск, Ленинская ул., д. 5 кв.165', '667-48-74'),
('Желиба Жигер Леонидович', '06.02.2001', 'Россия, г. Димитровград, Молодежный пер., д. 11 кв.99', '595-90-55'),
('Хохлов Василий Андреевич', '19.12.2001', 'Россия, г. Королёв, Новоселов ул., д. 23 кв.117', '636-65-05'),
('Меркушев Константин Юхимович', '26.12.2002', 'Россия, г. Сургут, Заречный пер., д. 23 кв.196', '661-75-99'),
('Мясников Тит Валериевич', '21.04.2000', 'Россия, г. Ковров, Комсомольская ул., д. 12 кв.184', '846-24-01'),
('Поляков Илларион Валериевич', '12.03.2001', 'Россия, г. Северодвинск, Сосновая ул., д. 22 кв.117', '604-82-53'),
('Спивак Мирослав Андреевич', '25.05.2001', 'Россия, г. Кызыл, Победы ул., д. 3 кв.92', '968-01-55'),
('Князев Людовик Борисович', '30.10.2001', 'Россия, г. Орёл, Сосновая ул., д. 22 кв.79', '968-84-35'),
('Новиков Людовик Платонович', '16.09.2002', 'Россия, г. Йошкар-Ола, Рабочая ул., д. 22 кв.124', '716-22-77'),
('Бородай Эдуард Алексеевич', '24.02.2000', 'Россия, г. Первоуральск, Школьный пер., д. 18 кв.75', '717-07-03'),
('Борисов Йосып Вадимович', '14.07.2000', 'Россия, г. Нижнекамск, Октябрьская ул., д. 13 кв.17', '617-87-34'),
('Савин Максим Сергеевич', '06.06.2001', 'Россия, г. Пушкино, Новая ул., д. 24 кв.165', '925-46-08'),
('Панов Жигер Богданович', '05.10.2001', 'Россия, г. Домодедово, Тихая ул., д. 17 кв.173', '246-51-34'),
('Сирко Чарльз Анатолиевич', '30.10.2002', 'Россия, г. Пушкино, Вишневая ул., д. 19 кв.105', '529-33-30'),
('Бондаренко Семён Артёмович', '05.01.2000', 'Россия, г. Братск, Космонавтов ул., д. 15 кв.83', '043-63-23'),
('Кириллов Харитон Артёмович', '11.12.2001', 'Россия, г. Щёлково, Приозерная ул., д. 10 кв.62', '703-90-75'),
('Гриневская Иван Виталиевич', '18.12.2001', 'Россия, г. Новороссийск, Колхозная ул., д. 15 кв.158', '119-87-77'),
('Фёдоров Йосеф Дмитриевич', '13.02.2002', 'Россия, г. Электросталь, Дачная ул., д. 3 кв.60', '268-86-52'),
('Логинов Никодим Брониславович', '28.05.2002', 'Россия, г. Невинномысск, Колхозная ул., д. 12 кв.145', '063-38-61'),
('Передрий Огюст Алексеевич', '03.05.2000', 'Россия, г. Рыбинск, Центральный пер., д. 22 кв.198', '645-72-19'),
('Пономарёв Яков Юхимович', '29.04.2002', 'Россия, г. Майкоп, Новый пер., д. 3 кв.128', '281-06-99'),
('Гребневский Афанасий Александрович', '21.05.2002', 'Россия, г. Якутск, Новая ул., д. 11 кв.121', '688-24-09'),
('Громов Цицерон Анатолиевич', '25.07.2002', 'Россия, г. Нижневартовск, Якуба Коласа ул., д. 6 кв.132', '637-59-81'),
('Михеев Максим Львович', '01.11.2002', 'Россия, г. Челябинск, Тихая ул., д. 1 кв.53', '374-58-48'),
('Котовский Феликс Романович', '17.02.2000', 'Россия, г. Шахты, Песчаная ул., д. 12 кв.145', '771-78-49'),
('Егоров Тимофей Дмитриевич', '04.05.2000', 'Россия, г. Калининград, Песчаная ул., д. 7 кв.138', '704-38-35'),
('Лапин Устин Артёмович', '12.05.2000', 'Россия, г. Липецк, Молодежная ул., д. 13 кв.181', '173-36-66'),
('Несвитайло Прохор Львович', '02.01.2001', 'Россия, г. Тверь, Октябрьская ул., д. 9 кв.98', '992-83-97'),
('Андреев Зиновий Ярославович', '21.02.2002', 'Россия, г. Новомосковск, Новоселов ул., д. 8 кв.91', '687-53-63'),
('Тихонов Огюст Иванович', '02.02.2000', 'Россия, г. Ульяновск, Полевая ул., д. 5 кв.179', '774-61-91'),
('Ершов Сергей Викторович', '08.06.2000', 'Россия, г. Энгельс, Молодежный пер., д. 3 кв.162', '756-42-25'),
('Назаров Абрам Васильевич', '13.07.2000', 'Россия, г. Нефтекамск, Заслонова ул., д. 11 кв.68', '170-47-75'),
('Крылов Артемий Александрович', '17.08.2001', 'Россия, г. Саратов, Победы ул., д. 7 кв.52', '629-99-39'),
('Линник Цицерон Максимович', '08.08.2002', 'Россия, г. Волгоград, Хуторская ул., д. 3 кв.190', '133-23-55'),
('Зиновьев Юрий Вадимович', '20.11.2001', 'Россия, г. Старый Оскол, 3 Марта ул., д. 6 кв.208', '033-61-43'),
('Нестеров Филипп Сергеевич', '06.03.2002', 'Россия, г. Нижневартовск, Советская ул., д. 17 кв.4', '199-91-02'),
('Гордеев Анатолий Львович', '08.03.2002', 'Россия, г. Омск, Центральная ул., д. 15 кв.191', '384-78-17'),
('Кириллов Сергей Сергеевич', '10.05.2002', 'Россия, г. Тамбов, Луговая ул., д. 9 кв.149', '887-45-63'),
('Логинов Фёдор Петрович', '16.08.2002', 'Россия, г. Йошкар-Ола, Центральный пер., д. 17 кв.99', '073-12-70'),
('Беляев Харитон Вадимович', '06.06.2001', 'Россия, г. Обнинск, Партизанская ул., д. 17 кв.3', '693-70-61'),
('Суворов Станислав Ярославович', '03.08.2001', 'Россия, г. Пермь, Заречная ул., д. 25 кв.210', '451-27-87'),
('Масловский Шерлок Львович', '02.10.2001', 'Россия, г. Муром, Совхозная ул., д. 1 кв.55', '750-32-49'),
('Белозёров Емельян Владимирович', '11.07.2002', 'Россия, г. Хабаровск, Белорусская ул., д. 4 кв.142', '233-40-47'),
('Баранов Эдуард Анатолиевич', '01.08.2002', 'Россия, г. Евпатория, Якуба Коласа ул., д. 5 кв.4', '314-37-57'),
('Лукашенко Феликс Сергеевич', '25.01.2000', 'Россия, г. Ковров, Гагарина ул., д. 19 кв.8', '594-35-54'),
('Яровой Феликс Максимович', '14.02.2000', 'Россия, г. Березники, Якуба Коласа ул., д. 4 кв.185', '146-00-10'),
('Попов Назар Борисович', '12.10.2000', 'Россия, г. Севастополь, Гагарина ул., д. 19 кв.38', '924-84-87');

drop trigger if exists `not_null_PIS`;
delimiter //
create trigger `not_null_PIS` before insert on PersonalInformationSoldiers
for each row 
begin 
	if new.Name = null then 
		signal sqlstate '45000' set message_text = "Can't be without values";
	end if;
	if new.BirthDate = null then
		signal sqlstate '45000' set message_text = "Can't be without values";
	end if;
	if new.Address = null then
		signal sqlstate '45000' set message_text = "Can't be without values";
	end if;
	if new.Telephone = null then
		signal sqlstate '45000' set message_text = "Can't be without values";
	end if;
end//
delimiter ;

drop table if exists Airport;
create table Airport(

	id serial primary key,
	`Type` varchar(20),
	Description varchar (255),
	Model varchar(45),
	Total bigint unsigned,
	Hangar bigint unsigned not null,
	military_object_id bigint unsigned not null default 7,
	foreign key (military_object_id) references MilitaryObject(id)
);

alter table Airport convert to character set utf8
collate utf8_general_ci;

insert into Airport(`Type`, Description, Model, Total, Hangar)
values
('Самолет', 'Дальний бомбардировщик', 'ТУ-160', '5', '1'),
('Самолет', 'Дальний бомбардировщик', 'ТУ-22М', '2', '1'),
('Самолет', 'Истребитель', 'Су-57', '4', '2'),
('Самолет', 'Истребитель', 'МиГ-29', '4', '2'),
('Самолет', 'Фронтовой бомбардировщик', 'Су-24', '5', '1'),
('Самолет', 'Истребитель-перехватчик', 'МиГ-31', '3', '2'),
('Вертолет', 'Вертолет', 'Ми-35М', '8', '3'),
('Вертолет', 'Боевой вертолет', 'Ка-50 «Чёрная акула»', '5', '1'),
('Вертолет', 'Боевой вертолет', 'Ми-28ВН', '6', '3'),
('Вертолет', 'Боевой вертолет', ' Ка-52 с 24 ПТУР «Вихрь»', '10', '4');

drop trigger if exists `not_null_Airport`;
delimiter //
create trigger `not_null_Airport` before insert on Airport
for each row 
begin 
	if new.`Type` = null then 
		signal sqlstate '45000' set message_text = "Can't be without values";
	end if;
	if new.Description = null then
		signal sqlstate '45000' set message_text = "Can't be without values";
	end if;
	if new.Model = null then
		signal sqlstate '45000' set message_text = "Can't be without values";
	end if;
	if new.Total = null then
		signal sqlstate '45000' set message_text = "Can't be without values";
	end if;
	if new.Hangar = null then
		signal sqlstate '45000' set message_text = "Can't be without values";
	end if;
end//
delimiter ;


/*-----------------------------------------------/Ammunition/---------------------------------------------------*/

create or replace view `Ammunition` as
select distinct Model, `Description`, sum(Total) as Total, UnitOfMeasure from Warehouse 
where UnitOfMeasure like 'ящ.' group by Model order by id;

/*-----------------------------------------------/Technic/------------------------------------------------------*/

create or replace view `Technic` as
select distinct Model, `Description`, sum(Total) as Total, UnitOfMeasure from Warehouse 
where `Description` rlike '(грузовик|джип|танк|ракетоноситель|бронетранспортер)' group by Model order by id;

/*------------------------------------------/Warehouses/---------------------------------------------------*/

create or replace view `Warehouse_1` as
select Description, Model, Total, UnitOfMeasure 
from Warehouse
where WarehouseNumber = '1';

create or replace view `Warehouse_2` as
select Description, Model, Total, UnitOfMeasure 
from Warehouse
where WarehouseNumber = '2';

create or replace view `Warehouse_3` as
select Description, Model, Total, UnitOfMeasure 
from Warehouse
where WarehouseNumber = '3';

create or replace view `Warehouse_4` as
select Description, Model, Total, UnitOfMeasure 
from Warehouse
where WarehouseNumber = '4';

create or replace view `Warehouse_5` as
select Description, Model, Total, UnitOfMeasure 
from Warehouse
where WarehouseNumber = '5';

create or replace view `Warehouse_6` as
select Description, Model, Total, UnitOfMeasure 
from Warehouse
where WarehouseNumber = '6';

create or replace view `Warehouse_7` as
select Description, Model, Total, UnitOfMeasure 
from Warehouse
where WarehouseNumber = '7';

create or replace view `Warehouse_8` as
select Description, Model, Total, UnitOfMeasure 
from Warehouse
where WarehouseNumber = '8';

/*------------------------------------------/Rank/---------------------------------------------------*/

create or replace view `Soldier` as
select Soldiers.PLatoonNumbers, Soldiers.NameSoldier, pis.BirthDate, pis.Address, pis.Telephone
from Soldiers, PersonalInformationSoldiers as pis
where `Rank` = 'Рядовой' and Soldiers.NameSoldier = pis.Name;

create or replace view `Corporal` as
select Soldiers.PLatoonNumbers, Soldiers.NameSoldier, pis.BirthDate, pis.Address, pis.Telephone 
from Soldiers, PersonalInformationSoldiers as pis
where `Rank` = 'Ефрейтор' and Soldiers.NameSoldier = pis.Name;

create or replace view `Sergeant` as
select Soldiers.PLatoonNumbers, Soldiers.NameSoldier, pis.BirthDate, pis.Address, pis.Telephone  
from Soldiers, PersonalInformationSoldiers as pis
where `Rank` = 'Сержант' and Soldiers.NameSoldier = pis.Name;

create or replace view `Top_sergeant` as
select Soldiers.PLatoonNumbers, Soldiers.NameSoldier, pis.BirthDate, pis.Address, pis.Telephone  
from Soldiers, PersonalInformationSoldiers as pis
where `Rank` = 'Старший сержант' and Soldiers.NameSoldier = pis.Name;




/*-----------------------------------------------/Platoons/------------------------------------------------*/

create or replace view `Platoon 1-12` as
select pis.Name, Soldiers.`Rank`, pis.Address, pis.Telephone
from Soldiers, PersonalInformationSoldiers as pis
where PLatoonNumbers = '1-12';

create or replace view `Platoon 2-12` as
select pis.Name, Soldiers.`Rank`, pis.Address, pis.Telephone
from Soldiers, PersonalInformationSoldiers as pis
where PLatoonNumbers = '2-12';

create or replace view `Platoon 3-12` as
select pis.Name, Soldiers.`Rank`, pis.Address, pis.Telephone
from Soldiers, PersonalInformationSoldiers as pis
where PLatoonNumbers = '3-12';

create or replace view `Platoon 4-12` as
select pis.Name, Soldiers.`Rank`, pis.Address, pis.Telephone
from Soldiers, PersonalInformationSoldiers as pis
where PLatoonNumbers = '4-12';

/*-------------------------------------------------/Hangar/--------------------------------------------------*/

create or replace view `Hangar-1` as
select `Type`, Description, Model, Total
from Airport
where Hangar = '1';

create or replace view `Hangar-2` as
select `Type`, Description, Model, Total
from Airport
where Hangar = '2';

create or replace view `Hangar-3` as
select `Type`, Description, Model, Total
from Airport
where Hangar = '3';

create or replace view `Hangar-4` as
select `Type`, Description, Model, Total
from Airport
where Hangar = '4';

/*-------------------------------------------------/Rockets/--------------------------------------------------*/

create or replace view `Rockets` as
select Description, Model, Total, UnitOfMeasure, WarehouseNumber 
from Warehouse where Description like '%ракета';
